# Determine how to refine the output of the playbook.
# Specify mount points to check, rather than all. 
---
- name: check to see if free space is greater than percent
  hosts:
  gather_facts: true

  tasks:
    name: Ensure that free space on {{ mountname }} is grater than 30%
    assert:
      that: mount.size_available > mount.size_total|float * 0.3
      msg: disk space has reached 70% threshold
    vars:
      mount: "{{ ansible_mounts | selectattr('mount','equalto',mountname) | list | first }}"
